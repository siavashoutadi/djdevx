{% extends "../../allauth_base.html" %}
{% load i18n %}
{% load allauth %}
{% block title %}
    {% trans "Activate Authenticator App" %}
{% endblock title %}
{% block content %}
<div class="flex flex-1 flex-col justify-center px-6 py-12 lg:px-8">
  <div class="sm:mx-auto sm:w-full sm:max-w-md">
    <h1 class="text-center text-2xl font-bold leading-9 tracking-tight">{% trans "Activate Authenticator App" %}</h1>
  </div>
  <div class="mt-8 sm:mx-auto sm:w-full sm:max-w-lg">
    <div class="rounded-md border border-gray-300 bg-gray-50 p-6 dark:border-gray-600 dark:bg-gray-800">
      <p class="text-center text-sm text-gray-700 dark:text-gray-200 mb-6">{% blocktranslate %}To protect your account with two-factor authentication, scan the QR code below with your authenticator app. Then, input the verification code generated by the app below.{% endblocktranslate %}</p>
      <div class="flex justify-center mb-6">
        <img src="{{ totp_svg_data_uri }}" alt="QR Code" style="width: 200px; height: 200px;" />
      </div>
      <p class="text-center text-sm text-gray-700 dark:text-gray-200 mb-2">{% trans "Alternatively, you can manually enter this secret key into your authenticator app:" %}</p>
      <div class="text-center bg-white dark:bg-gray-900 p-3 rounded border border-gray-200 dark:border-gray-600">
        <code class="font-mono text-sm">{{ form.secret }}</code>
      </div>
    </div>
    <form method="post" class="mt-8 space-y-6">
      {% csrf_token %}
      {{ form.as_p }}
      <div class="flex gap-3">
        <button type="submit"
                class="flex-1 flex justify-center rounded-md px-3 py-1.5 text-sm font-semibold leading-6 shadow-sm bg-black text-white hover:bg-slate-900 dark:bg-transparent dark:outline dark:outline-white dark:text-white dark:hover:text-gray-400 dark:hover:outline-gray-400">
          {% trans "Activate" %}
        </button>
        <a href="{% url 'mfa_index' %}"
           class="flex-1 flex justify-center rounded-md px-3 py-1.5 text-sm font-semibold leading-6 shadow-sm border border-gray-300 bg-white text-black hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-800 dark:text-white dark:hover:bg-gray-700">
          {% trans "Cancel" %}
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock content %}
